/*
 * Device tree for ADI sc57x-gen6 board
 *
 * Copyright 2014 Analog Devices Inc.
 *
 * Licensed under the GPL-2 or later.
 *
 */

/dts-v1/;

#include "sc57x.dtsi"

/ {
	model = "ADI sc57x-gen6";
	compatible = "adi,sc57x-gen6", "adi,sc57x";

	aliases {
	};

	memory@80000000 {
		device_type = "memory";
		reg = <0x80000000 0xF000000>;
	};

	reserved-memory {
		#address-cells = <1>;
		#size-cells = <1>;
		ranges;

		cont_memory: dsp_res@0x80000000 {
			compatible = "iris,gen6-cont-memory";
			reg = <0x80000000 0x1000000>;
			reg-names = "cont_memory";
		};

		cont_memory_dma: ddr_res_dma@0x80000000 {
			compatible = "iris,gen6-cont-dma-memory";
			reg = <0x81000000 0x1000000>;
			reg-names = "cont_memory_dma";
		};

		sram_mem_dma: sram_res_dma@0x20001000 {
			compatible = "iris,gen6-cont-dma-memory";
			reg = <0x20001000 0x000FE000>;
			reg-names = "sram_mem_dma";
		};

	};

	scb {
		cont_memory_dma {
			compatible = "iris,gen6-cont-dma-memory";
			memory-region = <&sram_mem_dma &cont_memory_dma>;
		};

		cont_memory {
			compatible = "iris,gen6-cont-memory";
			memory-region = <&cont_memory>;
		};

		left_sharc: left_sharc@0x20000000 {
			compatible = "iris,sharc";
			reg = <0x20000000 0x0800>;
			coreid = <1>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 203 IRQ_TYPE_EDGE_RISING>;
		};
		right_sharc: right_sharc@0x20000800 {
			compatible = "iris,sharc";
			reg = <0x20000800 0x0800>;
			coreid = <2>;
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 204 IRQ_TYPE_EDGE_RISING>;
		};

		cache_flush {
			compatible = "iris,cachecontrol-flush";
		};

		gptimer3: gptimer@0x310180C0 {
			compatible = "adi,sc57x-timer,aptina-clk";
		};

		uart0: uart@0x31003000 {
			pinctrl-names = "default", "hwflow";
			pinctrl-0 = <&uart0_default>;
			pinctrl-1 = <&uart0_hwflow>;
			status = "okay";
		};

		i2c0: twi@0x31001400 {
			status = "okay";
		};

		i2c1: twi@0x31001500 {
			status = "okay";
		};

		i2c2: twi@0x31001600 {
			status = "okay";
		};

		tmu@0x31016800 {
			compatible = "adi,sc57x-tmu";
			reg = <0x31016800 0x3C>; 
			interrupt-parent = <&gic>;
			interrupts =	<GIC_SPI 7 IRQ_TYPE_LEVEL_HIGH>, /* TMU0_FAULT */
					<GIC_SPI 8 IRQ_TYPE_LEVEL_HIGH>; /* TMU0_ALERT */
		};

		emac0: ethernet@0x3100C000 {
			phy-mode = "rmii";
			snps,reset-active-low;
			snps,reset-delays-us = <0 10000 10000>;
			snps,fixed-burst;
			snps,burst_len = <0x8>; /* BLEN16 */
			snps,pbl = <2>;
			pinctrl-names = "default";
			pinctrl-0 = <&eth0_default>;
			status = "okay";
		};

		spi1: spi@0x3102F000 {
			pinctrl-names = "default";
			pinctrl-0 = <&spi1_default>;
			status = "okay";

			spidev {
				#address-cells = <1>;
				size-cells = <1>;
				compatible = "rohm,dh2228fv";
				spi-max-frequency = <1000000>;
				reg = <42>;
			};
		};

		spi2: spi@0x31044000 {
			pinctrl-names = "default";
			pinctrl-0 = <&spi2_quad>;
			status = "okay";

			flash: is25lp256d@0 {
				#address-cells = <1>;
				#size-cells = <1>;
				compatible = "issi,is25lp256d", "jedec,spi-nor";
				spi-max-frequency = <50000000>;
				reg = <31>;
				spi-cpol;
				spi-cpha;
				spi-tx-bus-width = <4>;
				spi-rx-bus-width = <4>;
				dma-mode;

				partition@0 {
					label = "uboot (spi)";
					reg = <0x0000000 0x080000>; /* 0.5 MiB */
				};
				partition@1 {
					label = "data";
					reg = <0x0080000 0x100000>; /* 1.0 MiB */
				};
				partition@2 {
					label = "kernel 1. (spi)";
					reg = <0x0180000 0x270000>; /* 2.4375 MiB */
				};
				partition@3 {
					label = "device tree 1. (spi)";
					reg = <0x03F0000 0x010000>; /* 0.0625 MiB */
				};
				partition@4 {
					label = "root file system 1. (spi)";
					reg = <0x0400000 0xCC0000>; /* 12.75 MiB */
				};
				partition@5 {
					label = "kernel 2. (spi)";
					reg = <0x10C0000 0x270000>; /* 2.4375 MiB */
				};
				partition@6 {
					label = "device tree 2. (spi)";
					reg = <0x1330000 0x010000>; /* 0.0625 MiB */
				};
				partition@7 {
					label = "root file system 2. (spi)";
					reg = <0x1340000 0xCC0000>; /* 12.75 MiB */
				};
			};
		};

		mmc0: mmc@0x31010000 {
			pinctrl-names = "default";
			pinctrl-0 = <&mmc0_default>;
			bus-width = <4>;
			non-removable;
			no-1-8-v;
			status = "okay";
		};

		pinctrl@0 {
			mmc {
				mmc0_default: mmc0@0 {
					adi,group = "mmc0f4bgrp";
					adi,function = "mmc0";
				};
			};
			eth {
				eth0_default: eth0@0 {
					adi,group = "eth0rmiigrp";
					adi,function = "eth0";
				};
			};
			ppi {
				ppi0_10b: ppi0@2 {
					adi,group = "ppi0_10bgrp";
					adi,function = "ppi0";
				};
				ppi0_12b: ppi0@3 {
					adi,group = "ppi0_12bgrp";
					adi,function = "ppi0";
				};
			};
		};

		video_decoder_aptina: cap_aptina {
			compatible = "iris,gen6-aptina_mt9v022";
			card-name = "mt9v022";
			type = <2>;
			dma-channel = <28>;
			interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
			reg = <0x3102D000 0xfff>;
			spu_securep_id = <95>;
			i2c_bus_id = <0>;
			pinctrl-names = "8bit", "10bit", "12bit";
			pinctrl-0 = <&ppi0_8b>;
			pinctrl-1 = <&ppi0_10b>;
			pinctrl-2 = <&ppi0_12b>;
		};

		video_decoder_epc660: cap_epc660 {
			compatible = "iris,gen6-epc660";
			card-name = "epc660";
			type = <2>;
			dma-channel = <28>;
			interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>;
			reg = <0x3102D000 0xfff>;
			spu_securep_id = <95>;
			i2c_bus_id = <0>;
			pinctrl-names = "8bit", "10bit", "12bit";
			pinctrl-0 = <&ppi0_8b>;
			pinctrl-1 = <&ppi0_10b>;
			pinctrl-2 = <&ppi0_12b>;
			nrst-gpios = <&gpb 4 0>;
		};
	};
};
